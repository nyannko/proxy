
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Experiment Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../design/" />
    
    
    <link rel="prev" href="steps.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    ðŸ¥³
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../project/install.html">
            
                <a href="../project/install.html">
            
                    
                    Project setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../setup/">
            
                <a href="../setup/">
            
                    
                    System setup
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../setup/1_ss.html">
            
                <a href="../setup/1_ss.html">
            
                    
                    SS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../setup/2_v2.html">
            
                <a href="../setup/2_v2.html">
            
                    
                    v@ray
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../setup/3_tor.html">
            
                <a href="../setup/3_tor.html">
            
                    
                    Tor with Meek
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../setup/4_openconnect.html">
            
                <a href="../setup/4_openconnect.html">
            
                    
                    OpenConnect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../setup/5_openvpn.html">
            
                <a href="../setup/5_openvpn.html">
            
                    
                    OpenVPN
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../setup/6_lantern.html">
            
                <a href="../setup/6_lantern.html">
            
                    
                    Lantern
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../setup/7_wireguard.html">
            
                <a href="../setup/7_wireguard.html">
            
                    
                    WireGuard
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    Evaluation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="steps.html">
            
                <a href="steps.html">
            
                    
                    Steps
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.2" data-path="2_experiment.html">
            
                <a href="2_experiment.html">
            
                    
                    Experiment
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../design/">
            
                <a href="../design/">
            
                    
                    Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../other/">
            
                <a href="../other/">
            
                    
                    Others
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../other/cmd/">
            
                <a href="../other/cmd/">
            
                    
                    CMD
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../other/cmd/1_network.html">
            
                <a href="../other/cmd/1_network.html">
            
                    
                    network
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../other/cmd/2_transport.html">
            
                <a href="../other/cmd/2_transport.html">
            
                    
                    transport
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.3" data-path="../other/cmd/3_application.html">
            
                <a href="../other/cmd/3_application.html">
            
                    
                    application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.4" data-path="../other/cmd/4_sniffer.html">
            
                <a href="../other/cmd/4_sniffer.html">
            
                    
                    sniffer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.5" data-path="../other/cmd/5_port.html">
            
                <a href="../other/cmd/5_port.html">
            
                    
                    status
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../other/bash/bash.html">
            
                <a href="../other/bash/bash.html">
            
                    
                    Bash
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Experiment</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="ping-test">ping test</h3>
<p><img src="../images/ping.png" alt=""></p>
<h3 id="traceroute-test">traceroute test</h3>
<p>cn-am:</p>
<pre><code> 1  * * *
 2  11.212.252.65  6.671 ms 11.212.253.65  5.947 ms 11.212.253.69  5.618 ms
 3  11.218.131.173  4.181 ms 11.218.131.97  4.052 ms 11.218.131.125  6.259 ms
 4  11.218.131.250  1.149 ms  1.312 ms 11.218.131.242  1.181 ms
 5  119.38.212.114  1.014 ms 119.38.212.102  0.578 ms 116.251.107.177  0.868 ms
 6  116.251.113.153  1.475 ms 116.251.113.149  1.872 ms 116.251.113.137  1.470 ms
 7  183.2.180.253  1.638 ms 183.2.180.57  1.958 ms 183.2.180.197  1.617 ms
 8  183.2.182.113  2.716 ms 183.2.182.125  2.551 ms 183.2.182.117  2.726 ms
 9  119.147.222.5  8.206 ms 119.147.222.33  6.288 ms 119.147.223.109  7.860 ms
10  202.97.91.6  56.998 ms 202.97.94.150  6.860 ms 202.97.94.138  6.735 ms
11  202.97.94.69  52.755 ms 202.97.94.98  62.030 ms 202.97.94.94  56.416 ms
12  202.97.61.114  71.490 ms  71.172 ms  70.825 ms
13  202.97.62.214  11.949 ms  12.428 ms  12.194 ms
14  108.170.241.80  10.990 ms 108.170.241.16  13.125 ms 108.170.241.15  94.473 ms
15  108.170.229.13  11.187 ms 216.239.63.231  11.124 ms 108.170.229.13  10.697 ms
16  209.85.247.124  24.633 ms  26.688 ms 216.239.46.119  109.311 ms
17  209.85.249.74  168.214 ms 209.85.249.62  178.721 ms 209.85.249.74  167.455 ms
18  108.170.235.196  208.177 ms 74.125.37.82  214.269 ms 108.170.228.146  202.160 ms
19  72.14.233.82  188.731 ms 72.14.237.134  180.058 ms 72.14.233.82  187.360 ms
20  209.85.249.44  202.217 ms 209.85.240.17  201.404 ms 209.85.249.50  218.371 ms
21  216.239.56.82  213.774 ms 72.14.233.113  218.121 ms  217.428 ms
22  216.239.50.204  215.543 ms 72.14.238.187  224.458 ms 66.249.94.89  208.588 ms
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
</code></pre><p>cn-tw</p>
<pre><code> 1  * * *
 2  11.212.252.65  5.627 ms 11.212.253.69  6.687 ms 11.212.253.65  5.053 ms
 3  11.218.131.97  4.834 ms 11.218.131.169  3.709 ms 11.218.131.97  4.817 ms
 4  11.218.131.242  1.056 ms 11.218.131.230  1.044 ms 11.218.131.246  1.065 ms
 5  116.251.107.177  1.739 ms 119.38.212.102  0.566 ms  0.534 ms
 6  42.120.242.213  1.654 ms 42.120.242.217  2.295 ms 42.120.242.213  1.760 ms
 7  183.2.180.57  1.327 ms 183.2.180.197  2.406 ms 183.2.180.13  1.596 ms
 8  183.2.182.125  10.180 ms 183.2.182.117  3.478 ms 183.2.182.129  2.079 ms
 9  119.147.222.33  9.492 ms 119.147.220.37  10.072 ms 119.147.219.245  7.555 ms
10  202.97.94.146  6.312 ms 202.97.94.122  6.224 ms 202.97.94.142  6.204 ms
11  202.97.94.102  74.457 ms 202.97.94.90  87.047 ms  86.884 ms
12  202.97.61.114  86.087 ms  85.799 ms  92.376 ms
13  202.97.62.214  12.983 ms  12.130 ms  12.979 ms
14  108.170.241.15  71.755 ms  71.459 ms 108.170.241.80  11.611 ms
15  108.170.232.210  75.214 ms 209.85.249.156  82.241 ms 209.85.250.119  13.800 ms
16  209.85.247.124  29.962 ms 216.239.41.7  22.102 ms 172.253.50.217  24.959 ms
17  72.14.233.210  23.074 ms 216.239.51.215  86.876 ms 72.14.233.79  23.212 ms
18  216.239.54.95  25.799 ms * 209.85.247.197  26.563 ms
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * 35.201.231.236  27.283 ms *
</code></pre><p>The time of the first 13 hops are almost the same.</p>
<p>tw-am</p>
<pre><code> 1  74.125.37.82  143.556 ms 209.85.242.80  143.425 ms 216.239.49.134  143.904 ms
 2  72.14.237.134  157.309 ms 72.14.233.82  156.864 ms 209.85.143.135  157.851 ms
 3  * 209.85.240.17  174.408 ms 209.85.249.44  174.313 ms
 4  72.14.233.113  185.404 ms *  185.537 ms
 5  72.14.237.151  185.323 ms 72.14.232.89  185.297 ms 216.239.50.204  185.251 ms
 6  * * *
 7  * * *
 8  * * *
 9  * * *
10  * * *
11  * * *
12  * * *
13  * * *
14  * * *
</code></pre><h3 id="curl-test">curl test</h3>
<pre><code class="lang-bash">curl <span class="hljs-_">-s</span> -o /dev/null  -w <span class="hljs-string">&quot;%{time_namelookup} %{time_connect} %{time_appconnect} %{time_pretransfer} %{time_redirect} %{time_starttransfer} %{time_total}\n&quot;</span> https://www.nyannko.tk/
</code></pre>
<p>The result of curl HTTP will be redirected to HTTPS if flag <code>-L</code> is added. In these cases <code>-L</code> is not added in order to compare the latency differences between HTTP and HTTPS.</p>
<h4 id="http">HTTP</h4>
<p>from cn: 0.5~0.9s</p>
<pre><code>0.029 0.269 0.000 0.269 0.000 0.503 0.503       
0.509 0.722 0.000 0.722 0.000 0.934 0.935
0.509 0.722 0.000 0.722 0.000 0.936 0.936
0.028 0.242 0.000 0.243 0.000 0.457 0.457
0.028 0.244 0.000 0.244 0.000 0.461 0.461
</code></pre><p>from tw: (1.8s; 0.4s)</p>
<pre><code>1.510 1.697 0.000 1.697 0.000 1.882 1.882
0.004 0.189 0.000 0.189 0.000 0.374 0.374
...
</code></pre><h4 id="https">HTTPS</h4>
<p>from cn: (2.5s; 1.5~2.1s)</p>
<pre><code>1.510 1.726 2.305 2.306 0.000 2.535 2.535
0.509 0.725 1.306 1.306 0.000 1.523 1.523
0.125 0.405 1.120 1.120 0.000 1.406 1.406
0.125 0.463 1.285 1.285 0.000 1.637 1.637
0.509 0.886 1.754 1.754 0.000 2.123 2.123
</code></pre><p>HTTPS from tw: (2.4s; 0.8s)</p>
<pre><code>1.510 1.698 2.224 2.224 0.000 2.409 2.409
0.004 0.189 0.696 0.696 0.000 0.882 0.882
0.004 0.190 0.684 0.684 0.000 0.869 0.869
0.004 0.189 0.675 0.675 0.000 0.860 0.860
0.004 0.189 0.671 0.671 0.000 0.857 0.857
</code></pre><h4 id="intuition">Intuition</h4>
<p>Stable factors:</p>
<ol>
<li><p>DNS lookup time is always much higher in the first time than the subsequent results, since the latter use result which stores in DNS server cache.</p>
</li>
<li><p><code>server processing time = time_starttransfer - time_pretransfer</code>. In this case, server&apos;s processing time is about 0.2s.</p>
</li>
<li><p>redirect time is always 0.</p>
</li>
</ol>
<p>Determinants:</p>
<ol>
<li><p>The determinant for HTTP is the TCP connection time, namely <code>time_connect</code> in the second column. Because of the TCP three-way handshake, <code>time_connect</code> is usually greater than <code>RTT + (RTT/2)</code> which is measured in the ping test.</p>
</li>
<li><p>The determinants for HTTPs is SSL connection time, namely <code>time_appconnect</code> in the third column. This value consists of the TCP 3way handshake time(<code>time_connect</code>) and the time for subsequent server certificates transmission, key exchange, etc. This time maybe greater than 5*RTT, or maybe wrong.</p>
</li>
</ol>
<h3 id="comparison">comparison</h3>
<p>ss:</p>
<pre><code class="lang-bash">$ curl --proxy socks5h://127.0.0.1:7000 <span class="hljs-_">-s</span> -o /dev/null  -w <span class="hljs-string">&quot;%{time_namelookup} %{time_connect} %{time_appconnect} %{time_pretransfer} %{time_redirect} %{time_starttransfer} %{time_total}\n&quot;</span> https://www.google.com
0.000 0.001 0.649 0.649 0.000 0.891 0.891
</code></pre>
<p>mp:</p>
<pre><code class="lang-bash">$ curl --proxy socks5h://127.0.0.1:40000 <span class="hljs-_">-s</span> -o /dev/null  -w <span class="hljs-string">&quot;%{time_namelookup} %{time_connect} %{time_appconnect} %{time_pretransfer} %{time_redirect} %{time_starttransfer} %{time_total}\n&quot;</span> https://www.google.com
0.000 0.001 0.866 0.866 0.000 1.113 1.113
</code></pre>
<pre><code class="lang-bash">$ curl --proxy socks5h://127.0.0.1:7000 <span class="hljs-_">-s</span> -o /dev/null  -w <span class="hljs-string">&quot;%{time_namelookup} %{time_connect} %{time_appconnect} %{time_pretransfer} %{time_redirect} %{time_starttransfer} %{time_total}\n&quot;</span> https://www.youtube.com
0.000 0.001 0.664 0.664 0.000 0.988 2.655

$ curl --proxy socks5h://127.0.0.1:40000 <span class="hljs-_">-s</span> -o /dev/null  -w <span class="hljs-string">&quot;%{time_namelookup} %{time_connect} %{time_appconnect} %{time_pretransfer} %{time_redirect} %{time_starttransfer} %{time_total}\n&quot;</span> https://www.youtube.com
0.000 0.001 0.866 0.866 0.000 1.337 3.144
</code></pre>
<p>tor&#x7684;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x5206;&#x5E03;: &#x5EFA;&#x7ACB;tcp&#x8FDE;&#x63A5;&#x7528;&#x4E86;2.65s&#xFF0C;(&#x548C;&#x7B2C;&#x4E00;&#x4E2A;&#x70B9;)&#x5EFA;&#x7ACB;ssl&#x8FDE;&#x63A5;&#x7528;&#x4E86;9.528s&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x70B9;&#x56DE;&#x4F20;&#x6D88;&#x606F;&#x7528;&#x4E86;10.611s,&#x4F46;&#x662F;&#x603B;&#x65F6;&#x95F4;&#x5374;&#x6709;21s,&#x8FD9;&#x4E2D;&#x95F4;&#x7684;10&#x79D2;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x5230;&#x7F51;&#x7AD9;&#x518D;&#x5230;client&#x6240;&#x7528;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>
<pre><code class="lang-bash"> curl <span class="hljs-_">-s</span> -o /dev/null  --proxy socks5h://127.0.0.1:9050 -w <span class="hljs-string">&quot;%{time_namelookup} %{time_connect} %{time_appconnect} %{time_pretransfer} %{time_redirect} %{time_starttransfer} %{time_total}\n&quot;</span> https://www.youtube.com
0.000 2.652 9.528 9.528 0.000 10.611 21.070
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="steps.html" class="navigation navigation-prev " aria-label="Previous page: Steps">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../design/" class="navigation navigation-next " aria-label="Next page: Design">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Experiment","level":"1.4.2","depth":2,"next":{"title":"Design","level":"1.5","depth":1,"path":"design/README.md","ref":"design/README.md","articles":[]},"previous":{"title":"Steps","level":"1.4.1","depth":2,"path":"evaluation/steps.md","ref":"evaluation/steps.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"evaluation/2_experiment.md","mtime":"2019-01-14T22:35:25.735Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-11-13T22:44:20.429Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

